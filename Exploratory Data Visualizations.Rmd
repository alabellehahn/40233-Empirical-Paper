---
title: "Exploratory Data Visualizations"
author: "Alana LaBelle-Hahn"
date: "12/10/2021"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(dplyr)
library(readxl)
library(lubridate) #Don't think I'll be needing lubridate but leaving it in for now
library(tidyxl)
library(data.table)
library(unpivotr)
library(knitr)

```

```{r, reading in data}

consumer_data <- read_csv("combined_months.csv")

```

```{r}

# I want to create cuisine groups in order to visualize the difference between ethnic food categories
<- consumer_data %>%
  filter(type = )

```

```{r, echo = FALSE}
#Testing analytic capabilities of newly formatted data

consumer_data %>%
  group_by(type) %>%
  group_by(date) %>%
  filter(question == "Race (4 race groups):") %>%
  filter(!consumption == "Total") %>%
  filter(date == "May 2019") %>%
  ggplot(aes(x = demographic, y = n, fill = type)) + 
  geom_col(color = "black") + 
  #scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +
  theme_linedraw()+
  labs(title = "Ethnic Food Consumption Across Racial Categories", 
       subtitle = "May 2019 Survey", 
       x = "Race",
       y = "Percent %",
       caption = "Source: https://reports-mintel-com.proxy.uchicago.edu/display/1044545/?fromSearch=%3Ff
       ilters.category%3D118%26last_filter%3Dcategory")

#Visualizing any consumption across racial groups
tidied_data %>%
  group_by(type) %>%
  filter(question == "Race (4 race groups):") %>%
  filter(!consumption == "Total") %>%
  filter(consumption == "Any consumption (net)") %>%
  ggplot(aes(x = demographic, y = n, fill = type)) + 
  geom_col(color = "black") + 
  theme_linedraw()+
  labs(title = "Any Ethnic Food Consumption Across Racial Categories", 
       subtitle = "May 2019 Survey", 
       x = "Race",
       y = "Count (out of 2000 respondents)",
       caption = "Source: https://reports-mintel-com.proxy.uchicago.edu/display/1044545/?fromSearch=%3Ff
       ilters.category%3D118%26last_filter%3Dcategory")

# Visualizing at take-out consumption
tidied_data %>%
  group_by(type) %>%
  filter(question == "Race (4 race groups):") %>%
  filter(!consumption == "Total") %>%
  filter(consumption == "Away from home (eg restaurant, cafÃ©, etc)") %>%
  ggplot(aes(x = demographic, y = n, fill = type)) + 
  geom_col(color = "black") + 
  theme_linedraw()+
  labs(title = "Any Ethnic Food Consumption Across Racial Categories", 
       subtitle = "May 2019 Survey", 
       x = "Race",
       y = "Count (out of 2000 respondents)",
       caption = "Source: https://reports-mintel-com.proxy.uchicago.edu/display/1044545/?fromSearch=%3Ff
       ilters.category%3D118%26last_filter%3Dcategory")


# Visualizing at take-out consumption
tidied_data %>%
  group_by(type) %>%
  filter(question == "Race (4 race groups):") %>%
  filter(!consumption == "Total") %>%
  filter(consumption == "At home") %>%
  ggplot(aes(x = demographic, y = n, fill = type)) + 
  geom_col(color = "black") + 
  theme_linedraw()+
  labs(title = "Any Ethnic Food Consumption Across Racial Categories", 
       subtitle = "May 2019 Survey", 
       x = "Race",
       y = "Count (out of 2000 respondents)",
       caption = "Source: https://reports-mintel-com.proxy.uchicago.edu/display/1044545/?fromSearch=%3Ff
```

